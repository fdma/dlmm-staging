(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[317],{32837:function(e,t,r){Promise.resolve().then(r.bind(r,92611))},92611:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return PoolsPage}});var a=r(57437),s=r(2265),i=r(39891),o=r(16691),l=r.n(o),n=r(45253),c=r(3952),d=r(16573),m=r(24235),x=r(50039),h=r(86812),p=r(19223),charts_AprChart=e=>{let{data:t}=e,r=(0,s.useMemo)(()=>t.map(e=>({...e,date:new Date(e.timestamp).toLocaleDateString()})),[t]);return(0,a.jsx)("div",{className:"h-20 w-full",children:(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:r,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"aprGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#3B82F6",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#3B82F6",stopOpacity:.1})]})}),(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"date",tick:{fill:"#9CA3AF",fontSize:10},tickLine:{stroke:"#374151"},axisLine:{stroke:"#374151"}}),(0,a.jsx)(x.B,{tick:{fill:"#9CA3AF",fontSize:10},tickLine:{stroke:"#374151"},axisLine:{stroke:"#374151"}}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"0.375rem"},labelStyle:{color:"#9CA3AF"},itemStyle:{color:"#3B82F6"}}),(0,a.jsx)(p.x,{type:"monotone",dataKey:"apr",stroke:"#3B82F6",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#3B82F6"}})]})})})},charts_VolumeChart=e=>{let{data:t}=e,r=(0,s.useMemo)(()=>t.map(e=>({...e,date:new Date(e.timestamp).toLocaleDateString()})),[t]);return(0,a.jsx)("div",{className:"h-20 w-full",children:(0,a.jsx)(n.h,{width:"100%",height:"100%",children:(0,a.jsxs)(c.w,{data:r,children:[(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"volumeGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,a.jsx)("stop",{offset:"5%",stopColor:"#10B981",stopOpacity:.8}),(0,a.jsx)("stop",{offset:"95%",stopColor:"#10B981",stopOpacity:.1})]})}),(0,a.jsx)(d.q,{strokeDasharray:"3 3",stroke:"#374151"}),(0,a.jsx)(m.K,{dataKey:"date",tick:{fill:"#9CA3AF",fontSize:10},tickLine:{stroke:"#374151"},axisLine:{stroke:"#374151"}}),(0,a.jsx)(x.B,{tick:{fill:"#9CA3AF",fontSize:10},tickLine:{stroke:"#374151"},axisLine:{stroke:"#374151"}}),(0,a.jsx)(h.u,{contentStyle:{backgroundColor:"#1F2937",border:"1px solid #374151",borderRadius:"0.375rem"},labelStyle:{color:"#9CA3AF"},itemStyle:{color:"#10B981"}}),(0,a.jsx)(p.x,{type:"monotone",dataKey:"volume",stroke:"#10B981",strokeWidth:2,dot:!1,activeDot:{r:4,fill:"#10B981"}})]})})})},components_AnimatedCounter=e=>{let{value:t,duration:r=1e3,decimals:i=2,prefix:o="",suffix:l="",className:n=""}=e,[c,d]=(0,s.useState)(t),m=(0,s.useRef)(t),x=(0,s.useRef)();(0,s.useEffect)(()=>{if(t===m.current)return;let e=performance.now(),a=m.current,s=t-a,animate=i=>{let o=Math.min((i-e)/r,1);d(a+s*(1-(1-o)*(1-o))),o<1?x.current=requestAnimationFrame(animate):(d(t),m.current=t)};return x.current=requestAnimationFrame(animate),()=>{x.current&&cancelAnimationFrame(x.current)}},[t,r]);let h=c.toLocaleString("en-US",{minimumFractionDigits:i,maximumFractionDigits:i});return(0,a.jsxs)("span",{className:n,children:[o,h,l]})};let u=(0,s.memo)(e=>{let{pool:t,tokenMetadata:r}=e,[i,o]=(0,s.useState)(!1),[n,c]=(0,s.useState)(null),d=(0,s.useCallback)(()=>{o(e=>!e)},[]),m=(0,s.useCallback)(async e=>{try{await navigator.clipboard.writeText(e),c(e),setTimeout(()=>c(null),2e3)}catch(e){console.error("Failed to copy:",e)}},[]),x=(0,s.useCallback)(e=>e.social?(0,a.jsxs)("div",{className:"flex space-x-2 mt-2",children:[e.social.telegram&&(0,a.jsx)("a",{href:e.social.telegram,target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300",children:"Telegram"}),e.social.twitter&&(0,a.jsx)("a",{href:e.social.twitter,target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300",children:"Twitter"}),e.social.discord&&(0,a.jsx)("a",{href:e.social.discord,target:"_blank",rel:"noopener noreferrer",className:"text-primary-400 hover:text-primary-300",children:"Discord"})]}):null,[]),h=null==r?void 0:r[t.mint_x],p=null==r?void 0:r[t.mint_y];return(0,a.jsxs)("div",{className:"bg-primary-900/50 backdrop-blur-sm rounded-lg border border-primary-800/50 p-4 transition-all duration-300 hover:border-primary-700/50",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(null==h?void 0:h.logoURI)&&(0,a.jsx)("div",{className:"relative w-8 h-8",children:(0,a.jsx)(l(),{src:h.logoURI,alt:h.symbol,width:32,height:32,className:"rounded-full",loading:"lazy"})}),(null==p?void 0:p.logoURI)&&(0,a.jsx)("div",{className:"relative w-8 h-8",children:(0,a.jsx)(l(),{src:p.logoURI,alt:p.symbol,width:32,height:32,className:"rounded-full",loading:"lazy"})}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-primary-100",children:[null==h?void 0:h.symbol,"/",null==p?void 0:p.symbol]}),(0,a.jsxs)("p",{className:"text-sm text-primary-400",children:[parseFloat(t.liquidity).toLocaleString()," TVL"]})]})]}),(0,a.jsx)("button",{onClick:d,className:"text-primary-400 hover:text-primary-300 transition-colors",children:i?"▼":"▶"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-primary-400",children:"APR"}),(0,a.jsx)("p",{className:"text-lg font-medium text-accent-blue",children:(0,a.jsx)(components_AnimatedCounter,{value:t.apr,suffix:"%"})}),(0,a.jsx)(charts_AprChart,{data:t.aprHistory})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-primary-400",children:"Volume (24h)"}),(0,a.jsxs)("p",{className:"text-lg font-medium text-accent-green",children:["$",t.volume24h.toLocaleString()]}),(0,a.jsx)(charts_VolumeChart,{data:t.volumeHistory})]})]}),i&&(0,a.jsxs)("div",{className:"mt-4 space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-primary-400",children:"Pool Address"}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("code",{className:"text-sm text-primary-300",children:t.address}),(0,a.jsx)("button",{onClick:()=>m(t.address),className:"text-primary-400 hover:text-primary-300",children:n===t.address?"✓":"\uD83D\uDCCB"})]})]}),h&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-primary-400",children:[h.symbol," Info"]}),(0,a.jsx)("p",{className:"text-sm text-primary-300",children:h.name}),h.description&&(0,a.jsx)("p",{className:"text-sm text-primary-400 mt-1",children:h.description}),x(h)]}),p&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("p",{className:"text-sm text-primary-400",children:[p.symbol," Info"]}),(0,a.jsx)("p",{className:"text-sm text-primary-300",children:p.name}),p.description&&(0,a.jsx)("p",{className:"text-sm text-primary-400 mt-1",children:p.description}),x(p)]})]})]})});u.displayName="PoolCard";var f=r(25566);let y=f.env.NEXT_PUBLIC_API_URL||"https://api.meteora.ag/v1";async function fetchPools(){try{let e=await fetch("".concat(y,"/pools"));if(!e.ok)throw Error("Failed to fetch pools");let t=await e.json();return t}catch(e){throw console.error("Error fetching pools:",e),e}}var j=r(25566);let v=j.env.NEXT_PUBLIC_API_URL||"https://api.meteora.ag/v1";async function fetchTokenMetadata(e){try{let t=await fetch("".concat(v,"/tokens/metadata"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({addresses:e})});if(!t.ok)throw Error("Failed to fetch token metadata");let r=await t.json();if(!r.success||!r.data)throw Error(r.error||"Failed to fetch token metadata");return r.data}catch(e){throw console.error("Error fetching token metadata:",e),e}}function PoolsPage(){let[e,t]=(0,s.useState)({}),{data:r,isLoading:o}=(0,i.a)({queryKey:["pools"],queryFn:fetchPools,refetchInterval:3e4});return((0,s.useEffect)(()=>{if(r){let e=new Set;r.forEach(t=>{e.add(t.mint_x),e.add(t.mint_y)});let fetchMetadata=async()=>{let r=await fetchTokenMetadata(Array.from(e));t(r)};fetchMetadata()}},[r]),o)?(0,a.jsx)("div",{className:"flex items-center justify-center min-h-screen",children:(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary-500"})}):(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-primary-100 mb-8",children:"Pools"}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:null==r?void 0:r.map(t=>(0,a.jsx)(u,{pool:t,tokenMetadata:e},t.address))})]})}}},function(e){e.O(0,[552,202,971,472,744],function(){return e(e.s=32837)}),_N_E=e.O()}]);